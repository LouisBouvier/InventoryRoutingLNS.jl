<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Large Neighborhood Search · InventoryRoutingLNS.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://LouisBouvier.github.io/InventoryRoutingLNS.jl/localsearch/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">InventoryRoutingLNS.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../IRP/">Inventory Routing Problem</a></li><li><a class="tocitem" href="../input_output/">Input-Output</a></li><li><a class="tocitem" href="../evaluation/">Evaluation</a></li><li><a class="tocitem" href="../flows/">Flows and Graphs</a></li><li><a class="tocitem" href="../utils/">Utils</a></li><li class="is-active"><a class="tocitem" href>Large Neighborhood Search</a><ul class="internal"><li><a class="tocitem" href="#Small-neighborhoods"><span>Small neighborhoods</span></a></li><li><a class="tocitem" href="#Large-neighborhoods"><span>Large neighborhoods</span></a></li><li><a class="tocitem" href="#Algorithms-for-exploration"><span>Algorithms for exploration</span></a></li></ul></li><li><a class="tocitem" href="../heuristics/">Heuristics</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Large Neighborhood Search</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Large Neighborhood Search</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/main/docs/src/localsearch.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Large-neighborhood-search"><a class="docs-heading-anchor" href="#Large-neighborhood-search">Large neighborhood search</a><a id="Large-neighborhood-search-1"></a><a class="docs-heading-anchor-permalink" href="#Large-neighborhood-search" title="Permalink"></a></h1><h2 id="Small-neighborhoods"><a class="docs-heading-anchor" href="#Small-neighborhoods">Small neighborhoods</a><a id="Small-neighborhoods-1"></a><a class="docs-heading-anchor-permalink" href="#Small-neighborhoods" title="Permalink"></a></h2><h3 id="TSP-generalized"><a class="docs-heading-anchor" href="#TSP-generalized">TSP generalized</a><a id="TSP-generalized-1"></a><a class="docs-heading-anchor-permalink" href="#TSP-generalized" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.TSP_neighborhood!-Tuple{}" href="#InventoryRoutingLNS.TSP_neighborhood!-Tuple{}"><code>InventoryRoutingLNS.TSP_neighborhood!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">TSP_neighborhood!(;route::Route, 
                    instance::Instance, 
                    neighborhood_index::Int, 
                    index_1::Int, 
                    index_2::Int, 
                    stats::Dict, 
                    in_LNS::Bool
)</code></pre><p>Apply one of the three following TSP neighborhoods to <code>route</code>: <code>relocate</code>, <code>swap</code>, <code>2-opt*</code>.</p><p>Each neighborhood involves two indices <code>index_1</code> and <code>index_2</code>. We use <code>neighborhood_index</code>  to choose to apply <code>relocate</code> (1), <code>swap</code> (2) or <code>two_opt_star</code> (3). The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/TSP_neighborhoods.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_TSP_neighborhood!-Tuple{}" href="#InventoryRoutingLNS.iterative_TSP_neighborhood!-Tuple{}"><code>InventoryRoutingLNS.iterative_TSP_neighborhood!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_TSP_neighborhood!(;route::Route, 
                            instance::Instance, 
                            neighborhood_index::Int, 
                            stats::Dict, 
                            in_LNS::Bool
)</code></pre><p>Iteratively apply a TSP neighborhood to the stops of <code>route</code> untill no improvement.</p><p>We use <code>neighborhood_index</code> to choose to apply <code>relocate</code> (1), <code>swap</code> (2) or <code>two_opt_star</code> (3). The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/TSP_neighborhoods.jl#L71-L85">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.compress!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.compress!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.compress!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">compress!(route::Route, instance::Instance)</code></pre><p>Merge stops that visit the same customer, all gathered at the first date of stop.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_single_optim.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.compute_optimized_route_cost-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.compute_optimized_route_cost-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.compute_optimized_route_cost</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">compute_optimized_route_cost(route::Route, instance::Instance)</code></pre><p>Compute the cost of an optimally compressed and reordered copy of <code>route</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_single_optim.jl#L112-L116">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.optimize_route!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.optimize_route!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.optimize_route!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">optimize_route!(route::Route, instance::Instance)</code></pre><p>Compress and reorder <code>route</code> to optimality.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_single_optim.jl#L90-L94">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.optimize_route-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.optimize_route-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.optimize_route</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">optimize_route(route::Route, instance::Instance)</code></pre><p>Compress and reorder a copy of <code>route</code> to optimality.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_single_optim.jl#L101-L105">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.reorder_optimally!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.reorder_optimally!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.reorder_optimally!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reorder_optimally!(route::Route, instance::Instance)</code></pre><p>Find optimal stops&#39; order and apply it to <code>route</code>.</p><p>Brutal enumeration of the possible permutations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_single_optim.jl#L44-L50">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.update_route_order!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance, Vector{Int64}}" href="#InventoryRoutingLNS.update_route_order!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance, Vector{Int64}}"><code>InventoryRoutingLNS.update_route_order!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">update_route_order!(route::Route, instance::Instance, perm::Vector{Int})</code></pre><p>Update a <code>route</code> from a permutation <code>perm</code> of its stops.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_single_optim.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.delete_non_profitable_routes!" href="#InventoryRoutingLNS.delete_non_profitable_routes!"><code>InventoryRoutingLNS.delete_non_profitable_routes!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">delete_non_profitable_routes!(instance::Instance,
                                verbose::Bool = false;
                                stats::Dict = nothing,
                                 in_LNS::Bool = true,
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.delete_non_profitable_routes!"><code>delete_non_profitable_routes!</code></a> every day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_delete.jl#L89-L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.delete_non_profitable_routes!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}" href="#InventoryRoutingLNS.delete_non_profitable_routes!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}"><code>InventoryRoutingLNS.delete_non_profitable_routes!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">delete_non_profitable_routes!(instance::Instance, 
                                t::Int, 
                                d::Int
)</code></pre><p>Delete routes starting on day <code>t</code> by depot <code>d</code> when the total cost decreases.</p><p>Not used in the current version.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_delete.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.delete_non_profitable_routes!-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.delete_non_profitable_routes!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.delete_non_profitable_routes!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">delete_non_profitable_routes!(instance::Instance,
                                t::Int;
                                stats::Dict = nothing,
                                in_LNS::Bool = true,
)</code></pre><p>Delete routes starting on day <code>t</code> when the total cost decreases.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_delete.jl#L38-L50">source</a></section></article><h3 id="Single-depot-SDVRP-generalized"><a class="docs-heading-anchor" href="#Single-depot-SDVRP-generalized">Single-depot SDVRP generalized</a><a id="Single-depot-SDVRP-generalized-1"></a><a class="docs-heading-anchor-permalink" href="#Single-depot-SDVRP-generalized" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.get_neighbors_from_list-Tuple{InventoryRoutingLNS.Instance, Int64, Vector{Int64}, Float64}" href="#InventoryRoutingLNS.get_neighbors_from_list-Tuple{InventoryRoutingLNS.Instance, Int64, Vector{Int64}, Float64}"><code>InventoryRoutingLNS.get_neighbors_from_list</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_neighbors_from_list(instance::Instance,
                        c::Int,
                        cs::Vector{Int},
                        prop::Float64,
)::Vector{Int}</code></pre><p>Select the <code>prop</code> proportion of the closest neighbors to a customer <code>c</code> among customers <code>cs</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/neighborhood_pruning.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.insert_single_depot!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.insert_single_depot!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.insert_single_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">insert_single_depot!(route1::Route,
                        route2::Route,
                        i::Int,
                        instance::Instance;
                        stats::Dict = nothing,
                        in_LNS::Bool = true,
)</code></pre><p>Push <code>route1.stops[i]</code> to <code>route2.stops</code> and apply <a href="#InventoryRoutingLNS.compress!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>compress!</code></a> to avoid stop repetition.</p><p>Only applied on routes with same dates of departure and same starting depot. The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_exchange.jl#L1-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.insert_swap_single_depot_routes!" href="#InventoryRoutingLNS.insert_swap_single_depot_routes!"><code>InventoryRoutingLNS.insert_swap_single_depot_routes!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">insert_swap_single_depot_routes!(instance::Instance,
                                    verbose::Bool = false;
                                    stats::Dict = nothing,
                                    in_LNS::Bool = true,
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.iterative_insert_single_depot!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}"><code>iterative_insert_single_depot!</code></a> and <a href="#InventoryRoutingLNS.iterative_swap_single_depot!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}"><code>iterative_swap_single_depot!</code></a> on every day, depot config.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_exchange.jl#L294-L306">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_insert_single_depot!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}" href="#InventoryRoutingLNS.iterative_insert_single_depot!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}"><code>InventoryRoutingLNS.iterative_insert_single_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_insert_single_depot!(instance::Instance,
                                t::Int,
                                d::Int;
                                stats::Dict = nothing,
                                in_LNS::Bool = true,
)</code></pre><p>Try <a href="#InventoryRoutingLNS.insert_single_depot!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, InventoryRoutingLNS.Instance}"><code>insert_single_depot!</code></a> on pairs of routes sampled on day <code>t</code> starting at depot <code>d</code>.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_exchange.jl#L203-L216">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_swap_single_depot!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}" href="#InventoryRoutingLNS.iterative_swap_single_depot!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}"><code>InventoryRoutingLNS.iterative_swap_single_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_swap_single_depot!(instance::Instance,
                                t::Int,
                                d::Int;
                                stats::Dict = nothing,
                                in_LNS::Bool = true,
)</code></pre><p>Try <a href="#InventoryRoutingLNS.swap_single_depot!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64, InventoryRoutingLNS.Instance}"><code>swap_single_depot!</code></a> on pairs of routes sampled on day <code>t</code> starting at depot <code>d</code>.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_exchange.jl#L245-L258">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.swap_single_depot!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.swap_single_depot!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.swap_single_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">swap_single_depot!(route1::Route,
                    route2::Route,
                    i::Int,
                    j::Int,
                    instance::Instance;
                    stats::Dict = nothing,
                    in_LNS::Bool = true,
)</code></pre><p>Exchange <code>route1.stops[i]</code> and <code>route2.stops[j]</code> and apply <a href="#InventoryRoutingLNS.compress!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>compress!</code></a> to avoid stop repetition.</p><p>Only applied on routes with same dates of departure and same starting depot. The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_exchange.jl#L121-L137">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.concatenate_multiday-Tuple{Vector{InventoryRoutingLNS.Route}}" href="#InventoryRoutingLNS.concatenate_multiday-Tuple{Vector{InventoryRoutingLNS.Route}}"><code>InventoryRoutingLNS.concatenate_multiday</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">concatenate_multiday(routes::Vector{Route})::Route</code></pre><p>Concatenate <code>routes</code> that share the same depot, shifting them all to the earliest day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge_multiday.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.find_best_merge_multiday-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.find_best_merge_multiday-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.find_best_merge_multiday</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">find_best_merge_multiday(instance::Instance, 
                            d::Int
)</code></pre><p>Find the best pair of routes (related to the same depot <code>d</code>) to merge based on cost gain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge_multiday.jl#L73-L79">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.gain_merge_multiday-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.gain_merge_multiday-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.gain_merge_multiday</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gain_merge_multiday(route1::Route, 
                    route2::Route, 
                    instance::Instance
)::Float64</code></pre><p>Compute the cost gain of merging two routes.</p><p><code>Inf</code> if infeasible.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge_multiday.jl#L25-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_merge_multiday!" href="#InventoryRoutingLNS.iterative_merge_multiday!"><code>InventoryRoutingLNS.iterative_merge_multiday!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">iterative_merge_multiday!(instance::Instance,
                            verbose::Bool = false;
                            stats::Dict = nothing,
                            in_LNS::Bool = true,
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.perform_best_merge_multiday!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>perform_best_merge_multiday!</code></a> on every depot until no improvement found.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge_multiday.jl#L158-L170">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_merge_multiday!-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.iterative_merge_multiday!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.iterative_merge_multiday!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_merge_multiday!(instance::Instance,
                            d::Int;
                            stats::Dict = nothing,
                            in_LNS::Bool = true,
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.perform_best_merge_multiday!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>perform_best_merge_multiday!</code></a> on depot <code>d</code> until no improvement found.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge_multiday.jl#L130-L142">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.perform_best_merge_multiday!-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.perform_best_merge_multiday!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.perform_best_merge_multiday!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">perform_best_merge_multiday!(instance::Instance,
                                d::Int;
                                stats::Dict = nothing,
                                in_LNS::Bool = true,
)</code></pre><p>Perform the best merge over the routes related to the same depot <code>d</code>.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge_multiday.jl#L97-L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.concatenate-Tuple{Vector{InventoryRoutingLNS.Route}}" href="#InventoryRoutingLNS.concatenate-Tuple{Vector{InventoryRoutingLNS.Route}}"><code>InventoryRoutingLNS.concatenate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">concatenate(routes::Vector{Route})</code></pre><p>Concatenate <code>routes</code> that share the same depot and departure date.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.evaluate_all_merges-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}" href="#InventoryRoutingLNS.evaluate_all_merges-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}"><code>InventoryRoutingLNS.evaluate_all_merges</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate_all_merges(instance::Instance, 
                    t::Int, 
                    d::Int
)</code></pre><p>Evaluate all the possible merges related to <code>d</code> and <code>t</code> in the current solution.</p><p><code>Inf</code> if infeasible.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge.jl#L71-L80">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.gain_merge-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.gain_merge-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.gain_merge</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gain_merge(route1::Route, 
            route2::Route, 
            instance::Instance
)::Float64</code></pre><p>Compute the cost gain of merging two routes having same starting depot and day.</p><p><code>Inf</code> if infeasible.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge.jl#L35-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_merge!" href="#InventoryRoutingLNS.iterative_merge!"><code>InventoryRoutingLNS.iterative_merge!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">iterative_merge!(instance::Instance,
                    verbose::Bool = false;
                    stats::Dict = nothing,
                    in_LNS::Bool = true,
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.perform_best_merge!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64, Matrix{Float64}}"><code>perform_best_merge!</code></a> on every depot and day until no improvement found.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge.jl#L178-L190">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_merge!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}" href="#InventoryRoutingLNS.iterative_merge!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64}"><code>InventoryRoutingLNS.iterative_merge!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_merge!(instance::Instance,
                    t::Int,
                    d::Int;
                    stats::Dict = nothing,
                    in_LNS::Bool = true,
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.perform_best_merge!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64, Matrix{Float64}}"><code>perform_best_merge!</code></a> on depot <code>d</code> and day <code>t</code> until no improvement found.</p><p>The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge.jl#L147-L160">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.perform_best_merge!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64, Matrix{Float64}}" href="#InventoryRoutingLNS.perform_best_merge!-Tuple{InventoryRoutingLNS.Instance, Int64, Int64, Matrix{Float64}}"><code>InventoryRoutingLNS.perform_best_merge!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">perform_best_merge!(instance::Instance,
                    t::Int,
                    d::Int,
                    Δ::Matrix{Float64};
                    stats::Dict = nothing,
                    in_LNS::Bool = true,
)</code></pre><p>Perform the best merge over the routes related to the same depot <code>d</code> and departure date <code>t</code>.</p><p>In <code>Δ</code> we store the gain of merge for each pair of routes, iteratively updated. The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/route_merge.jl#L92-L107">source</a></section></article><h3 id="Multi-depot-SDVRP-generalized"><a class="docs-heading-anchor" href="#Multi-depot-SDVRP-generalized">Multi-depot SDVRP generalized</a><a id="Multi-depot-SDVRP-generalized-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-depot-SDVRP-generalized" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.change_day!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, Int64}" href="#InventoryRoutingLNS.change_day!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, Int64}"><code>InventoryRoutingLNS.change_day!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">change_day!(instance::Instance, 
            route::Route, 
            new_t::Int; 
            stats::Dict = nothing
)</code></pre><p>Change the departure day of <code>route</code> to <code>new_t</code>.</p><p>Only possible one day in the past or in the future. Feasible if the last day of arrival is before the horizon <code>T</code>  and if the <code>route</code> depot has nonnegative inventory when moving to the past.  Applied if feasible and cost is reduced.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_multiday_neighborhoods.jl#L1-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.change_day_all_one_pass!" href="#InventoryRoutingLNS.change_day_all_one_pass!"><code>InventoryRoutingLNS.change_day_all_one_pass!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">change_day_all_one_pass!(instance::Instance,
                            direction::String = &quot;ahead&quot;;
                            stats::Dict = nothing,
)</code></pre><p>Test <a href="#InventoryRoutingLNS.change_day!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, Int64}"><code>change_day!</code></a> on every route of the solution.</p><p>The <code>direction</code> can either be <code>&quot;ahead&quot;</code>, <code>&quot;back&quot;</code> or <code>&quot;random&quot;</code>. When random, we observe the realization of a Bernoulli random  variable with parameter <code>p = 0.5</code> and move ahead or back.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_multiday_neighborhoods.jl#L86-L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_change_day!" href="#InventoryRoutingLNS.iterative_change_day!"><code>InventoryRoutingLNS.iterative_change_day!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">iterative_change_day!(instance::Instance, 
                        direction::String = &quot;ahead&quot;; 
                        stats::Dict = nothing
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.change_day_all_one_pass!"><code>change_day_all_one_pass!</code></a> until no improvement is found.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_multiday_neighborhoods.jl#L143-L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.insert_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64}" href="#InventoryRoutingLNS.insert_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64}"><code>InventoryRoutingLNS.insert_multi_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">insert_multi_depot!(instance::Instance,
                    route1::Route,
                    route2::Route,
                    i::Int;
                    stats::Dict = nothing,
)</code></pre><p>Push <code>route1.stops[i]</code> to <code>route2.stops</code> and apply <a href="#InventoryRoutingLNS.compress!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>compress!</code></a> to avoid stop repetition.</p><p>Only applied on routes with same dates of departure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_neighborhoods.jl#L2-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.insert_swap_multi_depot_per_day!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.insert_swap_multi_depot_per_day!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.insert_swap_multi_depot_per_day!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">insert_swap_multi_depot_per_day!(instance::Instance; 
                                    stats::Dict = nothing
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.iterative_insert_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>iterative_insert_multi_depot!</code></a> and <a href="#InventoryRoutingLNS.iterative_swap_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>iterative_swap_multi_depot!</code></a> every day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_neighborhoods.jl#L283-L289">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_insert_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.iterative_insert_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.iterative_insert_multi_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_insert_multi_depot!(instance::Instance, 
                                t::Int; 
                                stats::Dict = nothing
)</code></pre><p>Try <a href="#InventoryRoutingLNS.insert_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64}"><code>insert_multi_depot!</code></a> on pairs of routes sampled on day <code>t</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_neighborhoods.jl#L224-L231">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_swap_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.iterative_swap_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.iterative_swap_multi_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_swap_multi_depot!(instance::Instance, 
                            t::Int; 
                            stats::Dict = nothing
)</code></pre><p>Try <a href="#InventoryRoutingLNS.swap_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64}"><code>swap_multi_depot!</code></a> on pairs of routes sampled on day <code>t</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_neighborhoods.jl#L253-L260">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_two_opt_star_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.iterative_two_opt_star_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.iterative_two_opt_star_multi_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_two_opt_star_multi_depot!(instance::Instance, 
                                    t::Int; 
                                    stats::Dict = nothing
)</code></pre><p>Try <a href="#InventoryRoutingLNS.two_opt_star_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64}"><code>two_opt_star_multi_depot!</code></a> on pairs of routes sampled on day <code>t</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_neighborhoods.jl#L402-L409">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.swap_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64}" href="#InventoryRoutingLNS.swap_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64}"><code>InventoryRoutingLNS.swap_multi_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">swap_multi_depot!(instance::Instance,
                    route1::Route,
                    route2::Route,
                    i::Int,
                    j::Int;
                    stats::Dict = nothing,
)</code></pre><p>Exchange <code>route1.stops[i]</code> and <code>route2.stops[j]</code> and apply <a href="#InventoryRoutingLNS.compress!-Tuple{InventoryRoutingLNS.Route, InventoryRoutingLNS.Instance}"><code>compress!</code></a> to avoid stop repetition.</p><p>Only applied on routes with same dates of departure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_neighborhoods.jl#L126-L138">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.two_opt_star_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64}" href="#InventoryRoutingLNS.two_opt_star_multi_depot!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.Route, InventoryRoutingLNS.Route, Int64, Int64}"><code>InventoryRoutingLNS.two_opt_star_multi_depot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">two_opt_star_multi_depot!(instance::Instance,
                            route1::Route,
                            route2::Route,
                            k::Int,
                            l::Int;
                            stats::Dict = nothing,
)</code></pre><p>Exchange <code>route1.stops[k+1:end]</code> with <code>route2.stops[l+1:end]</code> and compress.</p><p>Only applied on routes with same dates of departure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_neighborhoods.jl#L298-L310">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.two_opt_star_multi_depot_per_day!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.two_opt_star_multi_depot_per_day!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.two_opt_star_multi_depot_per_day!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">two_opt_star_multi_depot_per_day!(instance::Instance; 
                                    stats::Dict = nothing
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.iterative_two_opt_star_multi_depot!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>iterative_two_opt_star_multi_depot!</code></a> every day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/IRP_neighborhoods.jl#L427-L433">source</a></section></article><h2 id="Large-neighborhoods"><a class="docs-heading-anchor" href="#Large-neighborhoods">Large neighborhoods</a><a id="Large-neighborhoods-1"></a><a class="docs-heading-anchor-permalink" href="#Large-neighborhoods" title="Permalink"></a></h2><h3 id="Customer-reinsertion"><a class="docs-heading-anchor" href="#Customer-reinsertion">Customer reinsertion</a><a id="Customer-reinsertion-1"></a><a class="docs-heading-anchor-permalink" href="#Customer-reinsertion" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.build_model_objective_customer_insertion_flow!-Tuple{JuMP.Model, InventoryRoutingLNS.FlowGraph, Vector{InventoryRoutingLNS.FlowGraph}, Int64}" href="#InventoryRoutingLNS.build_model_objective_customer_insertion_flow!-Tuple{JuMP.Model, InventoryRoutingLNS.FlowGraph, Vector{InventoryRoutingLNS.FlowGraph}, Int64}"><code>InventoryRoutingLNS.build_model_objective_customer_insertion_flow!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">build_model_objective_customer_insertion_flow!(model::JuMP.Model,
                                                fg_vehicles::FlowGraph,
                                                fgs_commodities::Vector{FlowGraph},
                                                nb_m::Int,
)</code></pre><p>Define the objective function of the customer insertion MILP based on vehicles&#39; and commodities&#39; flow variables.</p><p>This cost is the sum of:</p><ul><li>one vehicles&#39; flow cost given the arcs&#39; costs of the <code>fg_vehicles</code> graph.</li><li>one commodity cost per commodity given <code>fgs_commodities</code> arcs costs.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_customer.jl#L173-L185">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.coupling_constraint_customer_flow_insertion!-Tuple{JuMP.Model, InventoryRoutingLNS.Instance, Int64, Vector{Any}, Int64, Vector{InventoryRoutingLNS.FlowGraph}, InventoryRoutingLNS.FlowGraph, Vector{InventoryRoutingLNS.Route}, Vector{Float64}, Vector, Vector}" href="#InventoryRoutingLNS.coupling_constraint_customer_flow_insertion!-Tuple{JuMP.Model, InventoryRoutingLNS.Instance, Int64, Vector{Any}, Int64, Vector{InventoryRoutingLNS.FlowGraph}, InventoryRoutingLNS.FlowGraph, Vector{InventoryRoutingLNS.Route}, Vector{Float64}, Vector, Vector}"><code>InventoryRoutingLNS.coupling_constraint_customer_flow_insertion!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">coupling_constraint_customer_flow_insertion!(model::JuMP.Model,
                                                instance::Instance,
                                                customer_index::Int,
                                                indices_m::Vector{Any},
                                                nb_m::Int,
                                                fgs_commodities::Vector{FlowGraph},
                                                fg_vehicles::FlowGraph,
                                                old_possible_routes::Vector{Route},
                                                places::Vector{Float64},
                                                costs::Vector,
                                                dates::Vector,
)</code></pre><p>Add the constraints binding commodities and vehicles variables related to the reinsertion of customer <code>customer_index</code>.</p><p>Those bindings occur for two types of routes:</p><ul><li>new direct routes (relaxation of the capacity constraints per vehicle at the arc level).</li><li>old routes in the solution (exact constraints given the pre-computed data).</li></ul><p>In both cases we focus on a subset of <code>nb_m</code> commodities indexed by <code>indices_m</code> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_customer.jl#L98-L119">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.customer_insertion_flow-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.customer_insertion_flow-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.customer_insertion_flow</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">customer_insertion_flow(instance::Instance;
                        customer_index::Int,
                        old_possible_routes::Vector{Route},
                        costs::Vector,
                        places::Vector,
                        dates::Vector,
                        former_quantities_former_routes::Dict, 
                        former_quantities_new_routes::Array,
                        use_warm_start::Bool,
                        force_values::Bool,
                        values_vehicles_flow::Array,
                        values_commodities_flows::Array,
)</code></pre><p>Define and solve the customer insertion MILP for the customer indexed by <code>customer_index</code>.</p><p>We possibly force the values on former and new routes using <code>force_values</code>  boolean and <code>former_quantities_former_routes</code> and <code>former_quantities_new_routes</code>  information, see <a href="../flows/#InventoryRoutingLNS.commodity_flow_graph_customer-Tuple{InventoryRoutingLNS.Instance}"><code>commodity_flow_graph_customer</code></a>.</p><p>We can use a warmstart if <code>use_warm_start</code> is <code>true</code>, with the values of the flows set  to <code>values_commodities_flows</code> and <code>values_vehicles_flow</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_customer.jl#L201-L224">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.fill_former_routes_customer_insertion!-Tuple{InventoryRoutingLNS.Instance, Vector{InventoryRoutingLNS.Route}, Array{Int64}, Array, InventoryRoutingLNS.FlowGraph, Int64}" href="#InventoryRoutingLNS.fill_former_routes_customer_insertion!-Tuple{InventoryRoutingLNS.Instance, Vector{InventoryRoutingLNS.Route}, Array{Int64}, Array, InventoryRoutingLNS.FlowGraph, Int64}"><code>InventoryRoutingLNS.fill_former_routes_customer_insertion!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fill_former_routes_customer_insertion!(instance::Instance,
                                        old_possible_routes::Vector{Route},
                                        flows::Array{Int},
                                        commodities_of_c::Array,
                                        fg_commodity::FlowGraph,
                                        customer_index::Int,
)</code></pre><p>Deduce from the flow variables the former routes to modify to deliver the customer indexed by <code>customer_index</code>.</p><p>The routes to fill are the <code>old_possible_routes</code>. We use the graph structure  of <code>fg_commodity</code> to make a link between the routes&#39; insertion positions and the indices of <code>flows</code> variable.  We highlight the commodity flow graphs share the same arcs, thus one reference graph is usefull. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_customer.jl#L343-L357">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.fill_new_routes_customer_insertion!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.FlowGraph, Array, Vector, Int64, Int64}" href="#InventoryRoutingLNS.fill_new_routes_customer_insertion!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.FlowGraph, Array, Vector, Int64, Int64}"><code>InventoryRoutingLNS.fill_new_routes_customer_insertion!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fill_new_routes_customer_insertion!(instance::Instance,
                                    fg_commodity::FlowGraph,
                                    flows::Array,
                                    indices_m::Vector,
                                    nb_m::Int,
                                    customer_index::Int,
)</code></pre><p>Create new routes solving bin packing problems involving quantities of <code>flows</code>.</p><p>We use the graph structure of <code>fg_commodity</code> to make a link between  the routes to create and the indices of <code>flows</code> variable. Only new direct routes are created since one customer is involved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_customer.jl#L409-L423">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.location_and_cost_insertion!-Tuple{InventoryRoutingLNS.Instance, Int64, Vector{InventoryRoutingLNS.Route}}" href="#InventoryRoutingLNS.location_and_cost_insertion!-Tuple{InventoryRoutingLNS.Instance, Int64, Vector{InventoryRoutingLNS.Route}}"><code>InventoryRoutingLNS.location_and_cost_insertion!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">location_and_cost_insertion!(instance::Instance, c::Int, routes::Vector{Route})</code></pre><p>Compute the costs, dates and capacities corresponding to the insertion places of customer <code>c</code> in <code>routes</code>.</p><p>For each route we compute and save the remaining loading capacity in <code>places</code>,  the cost induced by the reinsertion of customer <code>c</code> (other customers&#39; inventory and shortage costs induced by delays, and routing costs) at each position in  <code>costs</code>, and the dates of arrival to the corresponding reinsertion positions  in <code>dates</code>. This information is used to build both the commodities and vehicles  flow graphs, see <a href="../flows/#InventoryRoutingLNS.commodity_flow_graph_customer-Tuple{InventoryRoutingLNS.Instance}"><code>commodity_flow_graph_customer</code></a> and <a href="../flows/#InventoryRoutingLNS.expanded_vehicle_flow_graph_customer-Tuple{InventoryRoutingLNS.Instance}"><code>expanded_vehicle_flow_graph_customer</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_customer.jl#L35-L46">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.one_step_ruin_recreate_customer!-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.one_step_ruin_recreate_customer!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.one_step_ruin_recreate_customer!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">one_step_ruin_recreate_customer!(instance::Instance, customer_index::Int)</code></pre><p>Remove and insert the customer indexed by <code>customer_index</code> in the current solution.</p><p>We first remove the customer with <a href="#InventoryRoutingLNS.remove_customer!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>remove_customer!</code></a>, then precompute costs, dates and remaining capacities with <a href="#InventoryRoutingLNS.location_and_cost_insertion!-Tuple{InventoryRoutingLNS.Instance, Int64, Vector{InventoryRoutingLNS.Route}}"><code>location_and_cost_insertion!</code></a>, solve the reinsertion  MILP with <a href="#InventoryRoutingLNS.customer_insertion_flow-Tuple{InventoryRoutingLNS.Instance}"><code>customer_insertion_flow</code></a>, then fill former and new routes with  <a href="#InventoryRoutingLNS.fill_former_routes_customer_insertion!-Tuple{InventoryRoutingLNS.Instance, Vector{InventoryRoutingLNS.Route}, Array{Int64}, Array, InventoryRoutingLNS.FlowGraph, Int64}"><code>fill_former_routes_customer_insertion!</code></a> and <a href="#InventoryRoutingLNS.fill_new_routes_customer_insertion!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.FlowGraph, Array, Vector, Int64, Int64}"><code>fill_new_routes_customer_insertion!</code></a> respectively.  A warmstart is performed to gain speed, initialized at the last solution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_customer.jl#L479-L489">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.remove_customer!-Tuple{InventoryRoutingLNS.Instance, Int64}" href="#InventoryRoutingLNS.remove_customer!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>InventoryRoutingLNS.remove_customer!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">remove_customer!(instance::Instance, c::Int)</code></pre><p>Remove the customer indexed by <code>c</code> from the routes of the solution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_customer.jl#L1-L5">source</a></section></article><h3 id="Commodity-reinsertion"><a class="docs-heading-anchor" href="#Commodity-reinsertion">Commodity reinsertion</a><a id="Commodity-reinsertion-1"></a><a class="docs-heading-anchor-permalink" href="#Commodity-reinsertion" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.commodity_insertion_MILP-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.commodity_insertion_MILP-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.commodity_insertion_MILP</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">commodity_insertion_MILP(instance::Instance;
                            commodity_index::Int,
                            integer::Bool,
                            maxdist::Real,
                            former_quantities_former_routes::Dict,
                            former_quantities_new_routes::Array,
                            force_values::Bool,
                            values_vehicles_flow::Array,
                            values_commodities_flows::Array,
                            use_warm_start::Bool
)</code></pre><p>Define and solve the MILP for the reinsertion of commodity indexed by <code>commodity_index</code>.</p><p>We choose integer variables with the boolean <code>integer</code>.</p><p>We possibly sparsify the graphs with <code>maxdist</code>, and force the values on  former and new routes using <code>force_values</code> boolean and <code>former_quantities_former_routes</code> and <code>former_quantities_new_routes</code> information, see <a href="../flows/#InventoryRoutingLNS.commodity_flow_graph-Tuple{InventoryRoutingLNS.Instance}"><code>commodity_flow_graph</code></a>.</p><p>We can use a warmstart if <code>use_warm_start</code> is <code>true</code>, with the values of the flows set  to <code>values_commodities_flows</code> and <code>values_vehicles_flow</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_commodity.jl#L43-L66">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.fill_former_routes_commodity_insertion!-Tuple{InventoryRoutingLNS.Instance, Vector{Int64}, Vector{Int64}, InventoryRoutingLNS.FlowGraph, Int64}" href="#InventoryRoutingLNS.fill_former_routes_commodity_insertion!-Tuple{InventoryRoutingLNS.Instance, Vector{Int64}, Vector{Int64}, InventoryRoutingLNS.FlowGraph, Int64}"><code>InventoryRoutingLNS.fill_former_routes_commodity_insertion!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fill_former_routes_commodity_insertion!(instance::Instance,
                                        old_possible_routes_indices::Vector{Int},
                                        flow_commodity::Vector{Int},
                                        fg_commodity::FlowGraph,
                                        commodity_index::Int,
)</code></pre><p>Fill the former routes with commodity <code>commodity_index</code> reading the flow variables.</p><p>The routes to fill are indexed by <code>old_possible_routes_indices</code>. We use the graph structure of <code>fg_commodity</code> to make a link between  the routes and the indices of the <code>flow_commodity</code> <code>Vector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_commodity.jl#L213-L226">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.fill_new_routes_commodity_insertion!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.FlowGraph, Vector{Int64}, Int64}" href="#InventoryRoutingLNS.fill_new_routes_commodity_insertion!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.FlowGraph, Vector{Int64}, Int64}"><code>InventoryRoutingLNS.fill_new_routes_commodity_insertion!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fill_new_routes_commodity_insertion!(instance::Instance,
                                        fg_commodity::FlowGraph,
                                        flow_commodity::Vector{Int},
                                        commodity_index::Int,
)</code></pre><p>Create new routes solving bin packing problems involving the flow <code>flow_commodity</code>.</p><p>We use the graph structure of <code>fg_commodity</code> to make a link between  the routes to create and the indices of the <code>flow_commodity</code> <code>Vector</code>. We restrict those new routes to be direct.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_commodity.jl#L263-L275">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.one_step_ruin_recreate_commodity!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.one_step_ruin_recreate_commodity!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.one_step_ruin_recreate_commodity!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">one_step_ruin_recreate_commodity!(instance::Instance;
                                    commodity_index::Int,
                                    integer::Bool,
                                    maxdist::Real,
                                    delete_empty_routes::Bool = true,
)</code></pre><p>Remove and insert the commodity indexed by <code>commodity_index</code> in the current solution.</p><p>We first remove the commodity with <a href="#InventoryRoutingLNS.remove_commodity!-Tuple{InventoryRoutingLNS.Instance}"><code>remove_commodity!</code></a>, then solve the reinsertion  MILP with <a href="#InventoryRoutingLNS.commodity_insertion_MILP-Tuple{InventoryRoutingLNS.Instance}"><code>commodity_insertion_MILP</code></a>, then fill former and new routes with  <a href="#InventoryRoutingLNS.fill_former_routes_commodity_insertion!-Tuple{InventoryRoutingLNS.Instance, Vector{Int64}, Vector{Int64}, InventoryRoutingLNS.FlowGraph, Int64}"><code>fill_former_routes_commodity_insertion!</code></a> and <a href="#InventoryRoutingLNS.fill_new_routes_commodity_insertion!-Tuple{InventoryRoutingLNS.Instance, InventoryRoutingLNS.FlowGraph, Vector{Int64}, Int64}"><code>fill_new_routes_commodity_insertion!</code></a> respectively.  A warmstart is performed to gain speed, initialized at the last solution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_commodity.jl#L314-L328">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.remove_commodity!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.remove_commodity!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.remove_commodity!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">remove_commodity!(instance::Instance; 
                    commodity_index::Int, 
                    delete_empty_routes::Bool = true
)</code></pre><p>Remove the commodity indexed by <code>commodity_index</code> from the routes of the solution.</p><p>We update the <code>instance</code> solution depending on <code>delete_empty_routes</code>. If <code>true</code>, the routes with empty vehicles are deleted from the solution. Else, they are kept.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/ruin_recreate_commodity.jl#L3-L14">source</a></section></article><h2 id="Algorithms-for-exploration"><a class="docs-heading-anchor" href="#Algorithms-for-exploration">Algorithms for exploration</a><a id="Algorithms-for-exploration-1"></a><a class="docs-heading-anchor-permalink" href="#Algorithms-for-exploration" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.LNS!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.LNS!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.LNS!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">LNS!(instance::Instance;
        tol::Real = 0.01,
        n_it_commodity_reinsertion::Int,
        n_it_customer_reinsertion::Int,
        verbose::Bool = false,
        stats::Union{Nothing, Dict} = nothing,
)</code></pre><p>Large Neighborhood Search applied to <code>instance</code>.</p><p>Each iteration of the LNS is composed of:</p><ul><li>Multi-depot local search neighborhoods for descent.</li><li>Large neighborhoods: customer and commodity reinsertion,    using <a href="#InventoryRoutingLNS.iterative_ruin_recreate_customer!-Tuple{InventoryRoutingLNS.Instance}"><code>iterative_ruin_recreate_customer!</code></a>    and <a href="#InventoryRoutingLNS.iterative_ruin_recreate_commodity!-Tuple{InventoryRoutingLNS.Instance}"><code>iterative_ruin_recreate_commodity!</code></a>,   as well as <a href="../heuristics/#InventoryRoutingLNS.refill_routes!-Tuple{InventoryRoutingLNS.Instance}"><code>refill_routes!</code></a> MILP-based moves.</li></ul><p>The solution process can be stopped when the time elapsed is greater than  the time limit written in <code>stats</code> dictionnary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/local_search.jl#L237-L257">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.TSP_local_search!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.TSP_local_search!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.TSP_local_search!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">TSP_local_search!(instance::Instance;
                    niter::Int = 1,
                    verbose::Bool = false,
                    stats::Union{Nothing, Dict} = nothing,
                    in_LNS::Bool = true,
)</code></pre><p>Apply <code>niter</code> for loops on the routes of the solution of <code>instance</code> to apply <a href="#InventoryRoutingLNS.iterative_TSP_neighborhood!-Tuple{}"><code>iterative_TSP_neighborhood!</code></a>.</p><p>The three types of TSP neighborhoods are tested.     The <code>in_LNS</code> boolean is used to choose in which category the statistics  are included (either in the greedy initialization heuristic if <code>false</code>  or the neighborhood of the LNS if <code>true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/local_search.jl#L1-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_ruin_recreate_commodity!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.iterative_ruin_recreate_commodity!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.iterative_ruin_recreate_commodity!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_ruin_recreate_commodity!(instance::Instance;
                                    niter::Int,
                                    verbose::Bool = false,
                                    stats::Union{Nothing, Dict} = nothing,
                                    sort_by_length::Bool = false,
                                    delete_empty_routes::Bool = true,
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.one_step_ruin_recreate_commodity!-Tuple{InventoryRoutingLNS.Instance}"><code>one_step_ruin_recreate_commodity!</code></a> <code>niter</code> times on commodities. Two possibilities: select commodities at random, or by decreasing size.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/local_search.jl#L181-L192">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.iterative_ruin_recreate_customer!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.iterative_ruin_recreate_customer!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.iterative_ruin_recreate_customer!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iterative_ruin_recreate_customer!(instance::Instance;
                                    niter::Int,
                                    verbose::Bool = false,
                                    at_random::Bool = false,
                                    stats::Union{Nothing, Dict} = nothing,
)</code></pre><p>Apply <a href="#InventoryRoutingLNS.one_step_ruin_recreate_customer!-Tuple{InventoryRoutingLNS.Instance, Int64}"><code>one_step_ruin_recreate_customer!</code></a> <code>niter</code> times on customers. Two possibilities: select customers at random, or by decreasing cost order.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/local_search.jl#L124-L134">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.multi_depot_local_search!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.multi_depot_local_search!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.multi_depot_local_search!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">multi_depot_local_search!(instance::Instance;
                            niter::Int,
                            verbose::Bool = false,
                            stats::Union{Nothing, Dict} = nothing,
                            in_LNS::Bool = true,
)</code></pre><p>Multi-depot localsearch based on TSP, single-depot SDVRP and multi-depot SDVRP neighborhoods.</p><p>We pass <code>niter</code> times on each type of neighborhood.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/local_search.jl#L73-L84">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InventoryRoutingLNS.single_depot_local_search!-Tuple{InventoryRoutingLNS.Instance}" href="#InventoryRoutingLNS.single_depot_local_search!-Tuple{InventoryRoutingLNS.Instance}"><code>InventoryRoutingLNS.single_depot_local_search!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">single_depot_local_search!(instance::Instance;
                            maxdist::Real = Inf,
                            niter::Int = 1,
                            verbose::Bool = false,
                            stats::Union{Nothing, Dict} = nothing,
                            in_LNS::Bool = true,
)</code></pre><p>Single-depot localsearch based on <code>merge</code>, <code>delete</code>, <code>insert</code> and <code>swap</code>, and TSP neighborhoods.</p><p>We pass <code>niter</code> times on each type of neighborhood.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LouisBouvier/InventoryRoutingLNS.jl/blob/d5c0ac860a1f79c854f38a69c3eab6d4998c806c/src/local_search/local_search.jl#L39-L51">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../utils/">« Utils</a><a class="docs-footer-nextpage" href="../heuristics/">Heuristics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Friday 7 October 2022 07:05">Friday 7 October 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
